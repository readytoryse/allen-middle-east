
<div class="pdp_vcolumn_main swirl_bg">
    <div class="pdp_vcolumn_wrp page-width">
        <div class="pdp_vcolumn_inner">
            {% if section.blocks.size>0 %}
                <div class="new-grid" data-view="3-1">
                    {% if product %}
                      {% assign current_variant = product.selected_or_first_available_variant %}
                       {% for variant in product.variants %}
                        {% assign video = product.metafields.custom.installation_video %}
                        {% if variant.metafields.custom.installation_video != blank %}
                          {% assign video = variant.metafields.custom.installation_video %}
                        {% endif %}
                        {% if video %}
                              <div id="video-{{ variant.id }}" class="grid-item product-installation{% unless current_variant.id == variant.id %} hide{% endunless %}">
                                   {% if video contains '.mp4' %}
                                      <a data-fancybox href="{{ video | append: '#t=5'  }}" class="grid-item_wrp">
                                     {% else %}
                                    <a data-fancybox href={{video}}?wmode=opaque&amp;autoplay=1&amp;rel=0&amp;color=white&mute=1" class="grid-item_wrp"
                                      data-video="https://www.youtube.com/watch?v={{media.external_id }}">
                                     {% endif %} 
                                        <div class="video_wrp">
                                          <img src="{{ settings.installation_image | img_url :'master' }}" class="video-image" />
                                        </div>
                                        <div class="content">
                                          <div class="ic_title">
                                         <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6.9 6.92">
                          <rect width="6.9" height="6.92" fill="#e72230"></rect>
                          <path d="M4.57,3.44V3.5l-.12.17-.23.2a3.65,3.65,0,0,1-.64.41A5.52,5.52,0,0,1,3,4.54a1,1,0,0,1-.46.11s-.08,0-.1-.06L2.4,4.41a3,3,0,0,1-.07-.66,5.65,5.65,0,0,1,0-1,1.62,1.62,0,0,1,.09-.38.12.12,0,0,1,.13-.09,1.77,1.77,0,0,1,.33.08,5.35,5.35,0,0,1,.73.34,5,5,0,0,1,.71.49A.65.65,0,0,1,4.57,3.44Z" fill="#fff"></path>
                        </svg>
                                          <h2 class="heading">{{ settings.installation_text }}</h2>
                                          </div>
                                        </div>  
                                     </a>
                                </div>  
                        {% endif %} 
                        {% endfor %} 
                    {% endif %} 
                    {%  for blocks in section.blocks %}
                        {% if blocks.settings.title != blank and blocks.settings.video_url != blank %}
                                <div class="grid-item">
                                    <a data-fancybox href="{{ blocks.settings.video_url | append: '#t=5'  }}" class="grid-item_wrp">
                                        <div class="video_wrp">
                                            {% if blocks.settings.video_url != blank %}
                                                <video muted poster="{{ blocks.settings.poster_image | img_url :'master' }}" class="main-video" loop="false" width="100%" playsinline="" webkit-playsinline="" muted="true">
                                                    <source src="{{ blocks.settings.video_url | append: '#t=5'  }}" type="video/mp4">
                                                </video>
                                            {% endif %}
                                        </div>
                                        <div class="content">
                                            {% if blocks.settings.title != blank and blocks.settings.video_url != blank %}
                                                <div class="ic_title">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6.9 6.92">
                          <rect width="6.9" height="6.92" fill="#e72230"></rect>
                          <path d="M4.57,3.44V3.5l-.12.17-.23.2a3.65,3.65,0,0,1-.64.41A5.52,5.52,0,0,1,3,4.54a1,1,0,0,1-.46.11s-.08,0-.1-.06L2.4,4.41a3,3,0,0,1-.07-.66,5.65,5.65,0,0,1,0-1,1.62,1.62,0,0,1,.09-.38.12.12,0,0,1,.13-.09,1.77,1.77,0,0,1,.33.08,5.35,5.35,0,0,1,.73.34,5,5,0,0,1,.71.49A.65.65,0,0,1,4.57,3.44Z" fill="#fff"></path>
                        </svg>
                                                <h2 class="heading">{{ blocks.settings.title }}</h2>
                                                </div>
                                            {% endif %}
                                        </div>  
                                     </a>
                                </div>
                         {% endif %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
</div>


{% schema %}
    {
      "name": "t:labels.pdp-v-c",
      "class": "pdp_video_columns",
      "settings": [
        
    ],
    "blocks": [
        {
            "type": "block",
            "name": "t:labels.block",
            "settings": [
                {
                    "type": "text",
                    "id": "title",
                    "label": "t:labels.title"
                },
                {
                    "type":"image_picker",
                    "id": "poster_image",
                    "label": "t:labels.poster"
                },
                {
                    "type": "text",
                    "id": "video_url",
                    "label": "t:labels.video_url"
                }
            ]
        }
    ],

      "presets": [
        {
          "name": "t:labels.pdp-v-c",
        }
      ]
    }
  {% endschema %}