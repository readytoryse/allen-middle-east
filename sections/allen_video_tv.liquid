
<style>
  #shopify-section-{{ section.id }} .videoTV_main{
    {% if section.settings.section_padding_desktop != blank %}
      padding: {{ section.settings.section_padding_desktop }};
    {% endif %}
    {% if section.settings.section_margin_desktop != blank %}
      margin: {{ section.settings.section_margin_desktop }};
    {% endif %}
    {% if section.settings.section_bg_img != blank and section.settings.enable_section_img %}
      {% comment %}
      background: url({{ section.settings.section_bg_img | img_url: 'master' }});
      {% endcomment %}
      background-repeat: no-repeat;
      background-size: cover;
      background-position: top right;
    {% elsif section.settings.section_bg_color != blank %}
        background: {{section.settings.section_bg_color}};
    {% endif %}
  }
  @media(max-width: 768px){
    #shopify-section-{{ section.id }} .videoTV_main{
      {% if section.settings.section_padding_mobile != blank %}
        padding: {{ section.settings.section_padding_mobile }};
      {% endif %}
      {% if section.settings.section_margin_mobile != blank %}
        margin: {{ section.settings.section_margin_mobile }};
      {% endif %}
      background-position: top center;
    }
  }
</style>
<script>
  function lazyLoadBackgroundImages() {
    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const element = entry.target;
                const imageUrl = element.getAttribute('data-bg');
                element.style.backgroundImage = `url('${imageUrl}')`;
                observer.unobserve(element);
            }
        });
    });
    document.querySelectorAll('.lazy-bg').forEach(element => {
        observer.observe(element);
    });
}

// Example usage
document.addEventListener('DOMContentLoaded', lazyLoadBackgroundImages);

</script>
<div class="videoTV_main swirl_bg lazy-bg"  data-bg="{{ section.settings.section_bg_img | img_url: 'master' }}">
  <div class="videoTV_wrp page-width">
    <div class="videoTV_inner">
      
      {% if section.settings.heading_logo %}
        <div class="heading_logo">
          <img class="animape animape-visible" loading="lazy" data-animape="fadein" src="{{ section.settings.heading_logo | img_url: 'master' }}" width="" height="" alt="" />
        </div>
      {% endif %}

      {% if section.settings.main_video != ' ' or section.settings.main_video != blank %}
      <div class="video_wrp main-video-wrapp">
        <div class="mute-video sound_top muted-on"> <a href="javascript:" class="play_pause js-no-transition" data-wpel-link="internal"> <svg height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><title></title><line style="fill:none;stroke:#000;stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" x1="416" x2="64" y1="432" y2="80"></line><path d="M224,136.92v33.8a4,4,0,0,0,1.17,2.82l24,24a4,4,0,0,0,6.83-2.82V120.57a24.53,24.53,0,0,0-12.67-21.72,23.91,23.91,0,0,0-25.55,1.83,8.27,8.27,0,0,0-.66.51l-31.94,26.15a4,4,0,0,0-.29,5.92l17.05,17.06a4,4,0,0,0,5.37.26Z"></path><path d="M224,375.08l-78.07-63.92A32,32,0,0,0,125.65,304H64V208h50.72a4,4,0,0,0,2.82-6.83l-24-24A4,4,0,0,0,90.72,176H56a24,24,0,0,0-24,24V312a24,24,0,0,0,24,24h69.76l91.36,74.8a8.27,8.27,0,0,0,.66.51A23.93,23.93,0,0,0,243.63,413,24.49,24.49,0,0,0,256,391.45V341.28a4,4,0,0,0-1.17-2.82l-24-24a4,4,0,0,0-6.83,2.82ZM125.82,336Z"></path><path d="M352,256c0-24.56-5.81-47.88-17.75-71.27a16,16,0,0,0-28.5,14.54C315.34,218.06,320,236.62,320,256q0,4-.31,8.13a8,8,0,0,0,2.32,6.25l19.66,19.67a4,4,0,0,0,6.75-2A146.89,146.89,0,0,0,352,256Z"></path><path d="M416,256c0-51.19-13.08-83.89-34.18-120.06a16,16,0,0,0-27.64,16.12C373.07,184.44,384,211.83,384,256c0,23.83-3.29,42.88-9.37,60.65a8,8,0,0,0,1.9,8.26l16.77,16.76a4,4,0,0,0,6.52-1.27C410.09,315.88,416,289.91,416,256Z"></path><path d="M480,256c0-74.26-20.19-121.11-50.51-168.61a16,16,0,1,0-27,17.22C429.82,147.38,448,189.5,448,256c0,47.45-8.9,82.12-23.59,113a4,4,0,0,0,.77,4.55L443,391.39a4,4,0,0,0,6.4-1C470.88,348.22,480,307,480,256Z"></path></svg> </a> <a href="javascript:" class="play_button js-no-transition" data-wpel-link="internal"> <svg enable-background="new 0 0 32 32" height="32px" version="1.1" viewBox="0 0 32 32" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Guides"></g><g id="Mail"></g><g id="Cloud"></g><g id="Home"></g><g id="Back"></g><g id="Next"></g><g id="Reload"></g><g id="Buble"></g><g id="Accept"></g><g id="Reject"></g><g id="User"></g><g id="Download"></g><g id="Upload"></g><g id="Camera"></g><g id="Notification"></g><g id="About"></g><g id="Search"></g><g id="Cart"></g><g id="Sound"><path d="M19.3984,4.0928c-0.3555-0.165-0.7813-0.1084-1.0781,0.1445L11.5024,10H7.4551C6.0767,10,5,11.1211,5,12.5v7   C5,20.8789,6.0767,22,7.4551,22h4.0474l6.8062,5.7627C18.4932,27.9189,18.7227,28,18.9551,28c0.1426,0,0.3086-0.0303,0.4434-0.0928   C19.751,27.7432,20,27.3896,20,27V5C20,4.6104,19.751,4.2568,19.3984,4.0928z M18,24.8428l-5.4624-4.6055   C12.3574,20.084,12.106,20,11.8691,20H7.4551C7.1792,20,7,19.7754,7,19.5v-7C7,12.2246,7.1792,12,7.4551,12h4.4141   c0.2368,0,0.4883-0.084,0.6685-0.2373L18,7.1572V24.8428z M22.9746,13.0527c0.8535,1.708,0.8535,4.1865,0,5.8945   C22.7998,19.2979,22.4463,19.5,22.0791,19.5c-0.1504,0-0.3027-0.0342-0.4463-0.1055c-0.4941-0.2471-0.6943-0.8477-0.4473-1.3418   c0.5752-1.1514,0.5752-2.9541,0-4.1055c-0.2471-0.4941-0.0469-1.0947,0.4473-1.3418   C22.127,12.3604,22.7285,12.5586,22.9746,13.0527z M25.7607,21.9473C25.585,22.2979,25.2324,22.5,24.8652,22.5   c-0.1504,0-0.3027-0.0342-0.4463-0.1055c-0.4941-0.2471-0.6943-0.8477-0.4473-1.3418c1.4404-2.8809,1.4404-7.2246,0-10.1055   c-0.2471-0.4941-0.0469-1.0947,0.4473-1.3418c0.4941-0.2451,1.0947-0.0469,1.3418,0.4473   C27.4834,13.499,27.4834,18.501,25.7607,21.9473z"></path></g><g id="List"></g><g id="Settings"></g></svg> </a></div>
        <div class="icon_play icon_play" data-video="{{ block.settings.video_url }}">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6.9 6.92">
            <rect width="6.9" height="6.92" fill="#e72230"></rect>
            <path d="M4.57,3.44V3.5l-.12.17-.23.2a3.65,3.65,0,0,1-.64.41A5.52,5.52,0,0,1,3,4.54a1,1,0,0,1-.46.11s-.08,0-.1-.06L2.4,4.41a3,3,0,0,1-.07-.66,5.65,5.65,0,0,1,0-1,1.62,1.62,0,0,1,.09-.38.12.12,0,0,1,.13-.09,1.77,1.77,0,0,1,.33.08,5.35,5.35,0,0,1,.73.34,5,5,0,0,1,.71.49A.65.65,0,0,1,4.57,3.44Z" fill="#fff"></path>
          </svg>
        </div>
        <video class="main-video" loop="true" controls width="100%" playsinline muted="true">
          <source src="{{ section.settings.main_video | append: '#t=5'  }}" type="video/mp4">
        </video>
      </div>
      {% endif %}
      
      {% if section.blocks.size>0 %}
      <div class="new-grid" data-view='small'>
        {% for block in section.blocks %}
          <a href="{{ block.settings.link }}" class="grid-item">
            <div class="grid-item_wrp">
              {% if block.settings.image != blank %}
              <div class="video_wrp">
                <img class="animape animape-visible" width="250" height="110" loading="lazy" data-animape="fadein" src="{{ block.settings.image | img_url :'master' }}"/>
              </div>
              {% endif %}
              
              {% if block.settings.heading %}
                <div class="heading">{{ block.settings.heading }}</div>
              {% endif %}
              
              {% if block.settings.description %}
                <div class="description">{{ block.settings.description }}</div>
              {% endif %}
              
            </div>
          </a>
        {% endfor %}
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% schema %}
  {
    "name": "t:labels.allen_video_tv",
    "settings": [
      {
        "type":"text",
        "id": "main_video",
        "label": "t:labels.main_video"
      },
      {
        "type": "image_picker",
        "id": "heading_logo",
        "label": "t:labels.heading_logo"
      },
      {
         "type": "color",
         "id": "section_bg_color",
         "label": "t:labels.section_bg_color"
      },
      {
        "type": "checkbox",
        "id": "enable_section_img",
        "label": "t:labels.enable_bg_img",
        "info": "t:labels.enable_section_img",
      },
      {
        "type": "image_picker",
        "id": "section_bg_img",
        "label": "t:labels.section_bg_image"
      },
      {
        "type": "header",
        "content": "t:labels.spacing"
      },
      {
        "type": "text",
        "id": "section_padding_desktop",
        "label": "t:labels.section_padding_desktop"
      },
      {
        "type": "text",
        "id": "section_padding_mobile",
        "label": "t:labels.section_padding_mobile"
      },
      {
        "type": "text",
        "id": "section_margin_desktop",
        "label": "t:labels.section_margin_desktop"
      },
      {
        "type": "text",
        "id": "section_margin_mobile",
        "label": "t:labels.section_margin_mobile"
      }
    ],
    "blocks": [
      {
        "type": "video_block",
        "name": "t:labels.video-block",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "t:labels.blocks.image"
          },
          {
            "type":"url",
            "id": "link",
            "label": "t:labels.blocks.url"
          },
          {
            "type": "text",
            "id": "heading",
            "label": "t:labels.blocks.heading"
          },
          {
            "type": "richtext",
            "id": "description",
            "label": "t:labels.blocks.description"
          },
        ]
      }
    ],
    "presets": [
      {
        "name": "t:labels.allen_video_tv",
      }
    ]
  }
{% endschema %}